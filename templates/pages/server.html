{% extends "base.html" %}
{% block content %}
<!-- JS Bağlantıları -->

<script src="/static/js/server.js" defer></script>
<script src="/static/js/logs.js" defer></script>
{% if metadata.has_query %}
<script src="/static/js/query.js" defer></script>
{% endif %}

<main role="main" class="p-20">
    <div class="top-sections">

        <!-- Kontroller -->
        <section class="card controls" aria-labelledby="controls-title">
            <h2 id="controls-title" class="section-title">Sunucu Kontrolleri</h2>

            <div class="flex flex-row gap-10" role="group" aria-label="Sunucu komutları">
                {% if metadata.is_runable %}
                <button id="startBtn" class="btn" type="button" aria-pressed="false" onclick="server_start()">Sunucuyu Başlat</button>
                <button id="stopBtn" class="btn" type="button" aria-pressed="false" onclick="server_stop()">Sunucuyu Durdur</button>
                <button id="restartBtn" class="btn" type="button" aria-pressed="false" onclick="server_restart()">Sunucuyu Yeniden Başlat</button>
                {% else %}
                <button class="btn" type="button" aria-pressed="false" onclick="window.location.href='/servers/{{ metadata.running_server_id }}'">
                    {% if metadata.running_server_name %}
                        {{ metadata.running_server_name }} — Çalışıyor, önce onu kapatın
                    {% else %}
                        Çalışan Server Yok. Bunu görüyorsanız bildirin
                    {% endif %}
                    </button>
                {% endif %}
                <br>
                
                {% if metadata.has_mods %}
                <button id="DownloadModsZipBtn" class="btn" type="button" aria-pressed="false", onclick="download_mods()">Mod Paketi İndir</button>
                {% endif %}
                
                {% if metadata.has_resourcepacks %}
                <button id="DownloadResourcePacksZipBtn" class="btn" type="button" aria-pressed="false", onclick="download_resourcepacks()">Kaynak Paketi İndir</button>
                {% endif %}

            </div>
        </section>
        
        {% if metadata.has_query %}
        <!-- Query gösteren bölüm -->
        <section class="card" aria-labelledby="controls-title">
            <h2 id="controls-title", class="section-title">Query Data</h2>
            <div class="flex flex-row gap-10" role="group" aria-label="Aktif Oyuncular">

            </div>
        </section>



        {% endif %}
        

        <!-- Grafikleri gösteren bölüm -->
        <section class="card charts" aria-labelledby="charts-title">
            <h2 id="charts-title" class="section-title">Canlı Sistem Grafikleri</h2>

            <div class="chart-container card" aria-hidden="false">
                <div class="chart-area" role="img" aria-label="Sistem kullanım grafiği">
                    <canvas id="systemChart" width="400" height="200"></canvas>
                </div>
            </div>
        </section>
    </div>

    <!-- Loglar ve komut girişi -->
    <section class="card logs" aria-labelledby="logs-title">
        <h2 id="logs-title" class="section-title">Sunucu Logları</h2>

        <pre id="logArea" class="log-box" role="log" aria-live="polite">Loglar burada görüntülenecek...</pre>

        <form id="commandForm" class="command-box" onsubmit="return false;" aria-label="Komut gönderme formu">
            <input
                type="text"
                id="cmdInput"
                class="command-input"
                name="command"
                placeholder="Terminal komutu girin..."
                aria-label="Komut girişi"
                autocomplete="off"
            />
            <button id="sendCmdBtn" class="btn command-btn" type="button", onclick="sendCommand()">Gönder</button>
        </form>
    </section>
</main>


{% endblock %}
